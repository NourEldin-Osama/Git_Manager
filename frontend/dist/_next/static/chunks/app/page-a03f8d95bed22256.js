(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6666:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ta});var a=s(8081),n=s(2149),r=s(4684),i=s(6522),c=s(2650);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,c.QP)((0,i.$)(t))}function o(e){let{className:t,...s}=e;return(0,a.jsx)(r.bL,{"data-slot":"tabs",className:l("flex flex-col gap-2",t),...s})}function d(e){let{className:t,...s}=e;return(0,a.jsx)(r.B8,{"data-slot":"tabs-list",className:l("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...s})}function u(e){let{className:t,...s}=e;return(0,a.jsx)(r.l9,{"data-slot":"tabs-trigger",className:l("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...s})}function h(e){let{className:t,...s}=e;return(0,a.jsx)(r.UC,{"data-slot":"tabs-content",className:l("flex-1 outline-none",t),...s})}var x=s(7590),m=s(3484);let p=(0,m.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-red-800 dark:hover:bg-red-700 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline",blue:"bg-blue-600 hover:bg-blue-700 text-white dark:bg-blue-600 dark:hover:bg-blue-700 dark:text-white shadow-xs",green:"bg-green-600 hover:bg-green-700 text-white dark:bg-green-600 dark:hover:bg-green-700 dark:text-white shadow-xs"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function f(e){let{className:t,variant:s,size:n,asChild:r=!1,is_loading:i,loading_text:c,children:o,...d}=e,u=r?x.DX:"button",h=i&&c?c:o;return(0,a.jsx)(u,{disabled:i||d.disabled,"data-slot":"button",className:l(p({variant:s,size:n,className:t})),...d,children:h})}function j(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card",className:l("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...s})}function g(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:l("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...s})}function v(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:l("leading-none font-semibold",t),...s})}function y(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:l("text-muted-foreground text-sm",t),...s})}function b(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:l("px-6",t),...s})}function w(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"card-footer",className:l("flex items-center px-6 [.border-t]:pt-6",t),...s})}function N(e){let{className:t,type:s,...n}=e;return(0,a.jsx)("input",{type:s,"data-slot":"input",className:l("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}var k=s(566);function _(e){let{className:t,...s}=e;return(0,a.jsx)(k.b,{"data-slot":"label",className:l("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}var A=s(6547),S=s(3778),C=s(2391),E=s(1871);function F(e){let{...t}=e;return(0,a.jsx)(A.bL,{"data-slot":"select",...t})}function z(e){let{...t}=e;return(0,a.jsx)(A.WT,{"data-slot":"select-value",...t})}function T(e){let{className:t,size:s="default",children:n,...r}=e;return(0,a.jsxs)(A.l9,{"data-slot":"select-trigger","data-size":s,className:l("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r,children:[n,(0,a.jsx)(A.In,{asChild:!0,children:(0,a.jsx)(S.A,{className:"size-4 opacity-50"})})]})}function P(e){let{className:t,children:s,position:n="popper",...r}=e;return(0,a.jsx)(A.ZL,{children:(0,a.jsxs)(A.UC,{"data-slot":"select-content",className:l("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[(0,a.jsx)(G,{}),(0,a.jsx)(A.LM,{className:l("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),(0,a.jsx)(L,{})]})})}function O(e){let{className:t,children:s,...n}=e;return(0,a.jsxs)(A.q7,{"data-slot":"select-item",className:l("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(A.VF,{children:(0,a.jsx)(C.A,{className:"size-4"})})}),(0,a.jsx)(A.p4,{children:s})]})}function G(e){let{className:t,...s}=e;return(0,a.jsx)(A.PP,{"data-slot":"select-scroll-up-button",className:l("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(E.A,{className:"size-4"})})}function L(e){let{className:t,...s}=e;return(0,a.jsx)(A.wn,{"data-slot":"select-scroll-down-button",className:l("flex cursor-default items-center justify-center py-1",t),...s,children:(0,a.jsx)(S.A,{className:"size-4"})})}let H=(0,m.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function V(e){let{className:t,variant:s,...n}=e;return(0,a.jsx)("div",{"data-slot":"alert",role:"alert",className:l(H({variant:s}),t),...n})}function D(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"alert-title",className:l("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",t),...s})}function U(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"alert-description",className:l("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...s})}var q=s(9571),M=s(1016);function K(e){let{...t}=e;return(0,a.jsx)(q.bL,{"data-slot":"dialog",...t})}function R(e){let{...t}=e;return(0,a.jsx)(q.l9,{"data-slot":"dialog-trigger",...t})}function J(e){let{...t}=e;return(0,a.jsx)(q.ZL,{"data-slot":"dialog-portal",...t})}function B(e){let{className:t,...s}=e;return(0,a.jsx)(q.hJ,{"data-slot":"dialog-overlay",className:l("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function I(e){let{className:t,children:s,...n}=e;return(0,a.jsxs)(J,{"data-slot":"dialog-portal",children:[(0,a.jsx)(B,{}),(0,a.jsxs)(q.UC,{"data-slot":"dialog-content",className:l("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...n,children:[s,(0,a.jsxs)(q.bm,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,a.jsx)(M.A,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function Y(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"dialog-header",className:l("flex flex-col gap-2 text-center sm:text-left",t),...s})}function Z(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"dialog-footer",className:l("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...s})}function W(e){let{className:t,...s}=e;return(0,a.jsx)(q.hE,{"data-slot":"dialog-title",className:l("text-lg leading-none font-semibold",t),...s})}function X(e){let{className:t,...s}=e;return(0,a.jsx)(q.VY,{"data-slot":"dialog-description",className:l("text-muted-foreground text-sm",t),...s})}var Q=s(7024),$=s(1027),ee=s(1479),et=s(3122),es=s(4883),ea=s(6723);let en="http://localhost:8000",er={utils:{health:async()=>{let e=await fetch("".concat(en,"/api/utils/health-check/"));if(!e.ok)throw Error("Failed to check system health");return e.json()}},system:{check:async()=>{let e=await fetch("".concat(en,"/api/system/check-prerequisites"));if(!e.ok)throw Error("Failed to check system prerequisites");return e.json()},openFolderDialog:async()=>{let e=await fetch("".concat(en,"/api/system/folder-select"),{method:"POST"});if(!e.ok)throw Error("Failed to open folder dialog");return e.json()}},accountTypes:{create:async e=>{let t=await fetch("".concat(en,"/api/account-types"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})});if(!t.ok)throw Error("Failed to create account type");return t.json()},list:async()=>{let e=await fetch("".concat(en,"/api/account-types"));if(!e.ok)throw Error("Failed to fetch account types");return e.json()},update:async(e,t)=>{let s=await fetch("".concat(en,"/api/account-types/").concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t})});if(!s.ok)throw Error("Failed to update account type");return s.json()},delete:async e=>{let t=await fetch("".concat(en,"/api/account-types/").concat(e),{method:"DELETE"});if(!t.ok)throw Error("Failed to delete account type");return t.json()}},accounts:{create:async e=>{let t=await fetch("".concat(en,"/api/accounts"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create account");return t.json()},list:async()=>{let e=await fetch("".concat(en,"/api/accounts"));if(!e.ok)throw Error("Failed to fetch accounts");return e.json()},get:async e=>{let t=await fetch("".concat(en,"/api/accounts/").concat(e));if(!t.ok)throw Error("Failed to fetch account details");return t.json()},update:async(e,t)=>{let s=await fetch("".concat(en,"/api/accounts/").concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw Error("Failed to update account");return s.json()},delete:async e=>{let t=await fetch("".concat(en,"/api/accounts/").concat(e),{method:"DELETE"});if(!t.ok)throw Error("Failed to delete account");return t.json()},syncSSHConfig:async()=>{let e=await fetch("".concat(en,"/api/accounts/sync-ssh-config"),{method:"POST"});if(!e.ok)throw Error("Failed to sync SSH config");return e.json()}},projects:{create:async e=>{let t=await fetch("".concat(en,"/api/projects"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create project");return t.json()},list:async()=>{let e=await fetch("".concat(en,"/api/projects"));if(!e.ok)throw Error("Failed to fetch projects");return e.json()},get:async e=>{let t=await fetch("".concat(en,"/api/projects/").concat(e));if(!t.ok)throw Error("Failed to fetch project details");return t.json()},update:async(e,t)=>{let s=await fetch("".concat(en,"/api/projects/").concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw Error("Failed to update project");return s.json()},delete:async e=>{let t=await fetch("".concat(en,"/api/projects/").concat(e),{method:"DELETE"});if(!t.ok)throw Error("Failed to delete project");return t.json()},validate:async e=>{let t=await fetch("".concat(en,"/api/projects/validate/").concat(e));if(!t.ok)throw Error("Failed to validate project");return t.json()}}};var ei=s(2135);function ec(e){let{accountType:t,onCreated:s,onUpdated:r,trigger:i,open:c,onOpenChange:l}=e,[o,d]=(0,n.useState)((null==t?void 0:t.name)||""),[u,h]=(0,n.useState)(!1),[x,m]=(0,n.useState)(!1),p=void 0!==c&&void 0!==l,j=p?l:m,g=async e=>{if(e.preventDefault(),!o.trim()){ei.o.error("Please enter a name for the account type");return}h(!0);try{let e;(null==t?void 0:t.id)?(e=await er.accountTypes.update(t.id,o),ei.o.success("Account type updated",{description:"".concat(o," was successfully updated.")}),r&&r(e)):(e=await er.accountTypes.create(o),ei.o.success("Account type added",{description:"".concat(o," was successfully added.")}),s&&s(e)),j(!1)}catch(e){console.error("Failed to save account type:",e),ei.o.error("Error saving account type",{description:e instanceof Error?e.message:"An error occurred"})}finally{h(!1)}};return(0,a.jsxs)(K,{open:p?c:x,onOpenChange:j,children:[i&&(0,a.jsx)(R,{asChild:!0,children:i}),(0,a.jsxs)(I,{className:"sm:max-w-[425px]",children:[(0,a.jsxs)(Y,{children:[(0,a.jsxs)(W,{children:[t?"Edit":"Add"," Account Type"]}),(0,a.jsx)(X,{children:t?"Update the name of this account type.":"Add a new type to categorize your Git accounts."})]}),(0,a.jsxs)("form",{onSubmit:g,children:[(0,a.jsx)("div",{className:"grid gap-4 py-4",children:(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(_,{htmlFor:"name",children:"Name"}),(0,a.jsx)(N,{id:"name",value:o,onChange:e=>d(e.target.value),placeholder:"personal, work, open source, etc.",disabled:u})]})}),(0,a.jsxs)(Z,{children:[(0,a.jsx)(f,{type:"button",variant:"outline",onClick:()=>j(!1),disabled:u,children:"Cancel"}),(0,a.jsx)(f,{type:"submit",disabled:u,variant:t?"blue":"green",children:u?"Saving...":t?"Save Changes":"Add"})]})]})]})]})}function el(e){let{account:t,onSubmit:s,onCancel:r,accountTypesVersion:i=0}=e,[c,l]=(0,n.useState)({id:(null==t?void 0:t.id)||0,name:(null==t?void 0:t.name)||"",user_name:(null==t?void 0:t.user_name)||"",user_email:(null==t?void 0:t.user_email)||"",account_type_id:(null==t?void 0:t.account_type_id)||void 0,ssh_key_path:(null==t?void 0:t.ssh_key_path)||""}),[o,d]=(0,n.useState)(null),[u,h]=(0,n.useState)([]),[x,m]=(0,n.useState)(!1),[p,j]=(0,n.useState)(!1),[g,v]=(0,n.useState)(!1),[y,b]=(0,n.useState)(!1);(0,n.useEffect)(()=>{w()},[i]);let w=async()=>{m(!0);try{let e=await er.accountTypes.list();h(e),!c.account_type_id&&e.length>0&&l(t=>{var s;return{...t,account_type_id:(null===(s=e.find(e=>"personal"===e.name))||void 0===s?void 0:s.id)||e[0].id}})}catch(e){console.error("Failed to fetch account types:",e),ei.o.error("Error loading account types",{description:e instanceof Error?e.message:"An error occurred"})}finally{m(!1)}},k=e=>{let{name:t,value:s}=e.target;l({...c,[t]:s})},A=async e=>{e.preventDefault(),b(!0),await s(c),b(!1)};return(0,a.jsxs)("form",{onSubmit:A,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(_,{htmlFor:"name",children:"Account Name"}),(0,a.jsx)(N,{id:"name",name:"name",value:c.name,onChange:k,placeholder:"Work, Personal, etc.",required:!0})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(_,{htmlFor:"user_name",children:"Username"}),(0,a.jsx)(N,{id:"user_name",name:"user_name",value:c.user_name,onChange:k,placeholder:"Your Git username",required:!0})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(_,{htmlFor:"user_email",children:"Email"}),(0,a.jsx)(N,{id:"user_email",name:"user_email",type:"email",value:c.user_email,onChange:k,placeholder:"your.email@example.com",required:!0})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(_,{htmlFor:"account_type",children:"Account Type"}),(0,a.jsxs)(F,{value:c.account_type_id?c.account_type_id.toString():void 0,onValueChange:e=>{if("new"===e){j(!0);return}l({...c,account_type_id:Number(e)})},disabled:x,children:[(0,a.jsx)(T,{id:"account_type",className:"w-full",children:(0,a.jsx)(z,{placeholder:x?"Loading account types...":"Select account type"})}),(0,a.jsxs)(P,{children:[u.map(e=>(0,a.jsx)(O,{value:e.id.toString(),children:e.name},e.id||"type-".concat(e.name))),(0,a.jsxs)(O,{value:"new",className:"text-primary flex items-center gap-2",children:[(0,a.jsx)(Q.A,{className:"h-4 w-4"}),"Add new type"]})]})]})]}),t&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)(_,{htmlFor:"ssh_key_path",children:"SSH Key Path (Optional)"}),(null==t?void 0:t.public_key)&&(0,a.jsxs)(K,{children:[(0,a.jsx)(R,{asChild:!0,children:(0,a.jsxs)(f,{type:"button",variant:"outline",size:"sm",children:[(0,a.jsx)($.A,{className:"mr-2 h-3 w-3"}),"View Public Key"]})}),(0,a.jsxs)(I,{className:"sm:max-w-md",children:[(0,a.jsxs)(Y,{children:[(0,a.jsx)(W,{children:"SSH Public Key"}),(0,a.jsx)(X,{children:"Add this public key to your Git provider."})]}),(0,a.jsx)("div",{className:"bg-muted rounded-md overflow-auto max-h-[200px]",children:(0,a.jsx)("div",{className:"p-3 min-w-full w-fit",children:(0,a.jsx)("pre",{className:"text-xs whitespace-pre",children:t.public_key})})}),(0,a.jsxs)(Z,{className:"flex flex-col sm:flex-row gap-2",children:[(0,a.jsx)(f,{onClick:()=>{(null==t?void 0:t.public_key)&&(navigator.clipboard.writeText(t.public_key),v(!0),ei.o.success("Public key copied to clipboard"),setTimeout(()=>{v(!1)},2e3))},className:"w-40 flex items-center gap-2",children:g?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ee.A,{className:"h-4 w-4"}),"Copied!"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(et.A,{className:"h-4 w-4"}),"Copy to Clipboard"]})}),(0,a.jsxs)(f,{variant:"outline",className:"flex items-center gap-2",onClick:()=>window.open("https://github.com/settings/ssh/new","_blank"),children:[(0,a.jsx)("svg",{role:"img",viewBox:"0 0 24 24",className:"h-4 w-4",fill:"currentColor",children:(0,a.jsx)("path",{d:ea.qli.path})}),"Add SSH Key to GitHub"]})]})]})]})]}),(0,a.jsx)(N,{id:"ssh_key_path",name:"ssh_key_path",value:c.ssh_key_path||"",onChange:k,placeholder:"~/.ssh/id_ed25519"}),o&&(0,a.jsxs)(V,{variant:"destructive",children:[(0,a.jsx)(es.A,{className:"h-4 w-4"}),(0,a.jsx)(D,{children:"Error"}),(0,a.jsx)(U,{children:o})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(f,{type:"button",variant:"outline",onClick:r,children:"Cancel"}),(0,a.jsx)(f,{type:"submit",variant:t?"blue":"green",is_loading:y,loading_text:t?"Saving...":"Adding...",children:t?"Update":"Add"})]}),(0,a.jsx)(ec,{open:p,onOpenChange:j,onCreated:e=>{h([...u,e]),e.id&&l({...c,account_type_id:e.id})}})]})}let eo=(0,m.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function ed(e){let{className:t,variant:s,asChild:n=!1,...r}=e,i=n?x.DX:"span";return(0,a.jsx)(i,{"data-slot":"badge",className:l(eo({variant:s}),t),...r})}var eu=s(2663),eh=s(1403),ex=s(3389),em=s(7830);function ep(e){var t;let{account:s,onEdit:r,onDelete:i}=e,[c,l]=(0,n.useState)(!1),[o,d]=(0,n.useState)(!1);return(0,a.jsxs)(j,{children:[(0,a.jsx)(g,{children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsx)(v,{children:s.name}),(0,a.jsx)(ed,{className:"capitalize",children:(null===(t=s.account_type)||void 0===t?void 0:t.name)||"personal"})]})}),(0,a.jsx)(b,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center text-sm",children:[(0,a.jsx)(eu.A,{className:"mr-2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{children:s.user_name})]}),(0,a.jsxs)("div",{className:"flex items-center text-sm",children:[(0,a.jsx)(eh.A,{className:"mr-2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{children:s.user_email})]}),s.ssh_key_path&&(0,a.jsxs)("div",{className:"flex items-center text-sm",children:[(0,a.jsx)($.A,{className:"mr-2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"truncate",children:s.ssh_key_path})]}),s.public_key&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsxs)(K,{children:[(0,a.jsx)(R,{asChild:!0,children:(0,a.jsxs)(f,{variant:"outline",size:"sm",className:"w-full",children:[(0,a.jsx)($.A,{className:"mr-2 h-4 w-4"}),"View Public Key"]})}),(0,a.jsxs)(I,{className:"sm:max-w-md",children:[(0,a.jsxs)(Y,{children:[(0,a.jsx)(W,{children:"SSH Public Key"}),(0,a.jsx)(X,{children:"Add this public key to your Git provider."})]}),(0,a.jsx)("div",{className:"bg-muted rounded-md overflow-auto max-h-[200px]",children:(0,a.jsx)("div",{className:"p-3 min-w-full w-fit",children:(0,a.jsx)("pre",{className:"text-xs whitespace-pre",children:s.public_key})})}),(0,a.jsxs)(Z,{className:"flex flex-col sm:flex-row gap-2",children:[(0,a.jsx)(f,{onClick:()=>{s.public_key&&(navigator.clipboard.writeText(s.public_key),l(!0),ei.o.success("Public key copied to clipboard"),setTimeout(()=>{l(!1)},2e3))},className:"w-40 flex items-center gap-2",children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ee.A,{className:"h-4 w-4"}),"Copied!"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(et.A,{className:"h-4 w-4"}),"Copy to Clipboard"]})}),(0,a.jsxs)(f,{variant:"outline",className:"flex items-center gap-2",onClick:()=>window.open("https://github.com/settings/ssh/new","_blank"),children:[(0,a.jsx)("svg",{role:"img",viewBox:"0 0 24 24",className:"h-4 w-4",fill:"currentColor",children:(0,a.jsx)("path",{d:ea.qli.path})}),"Add SSH Key to GitHub"]})]})]})]})}),s.ssh_key_filename&&(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsxs)(K,{children:[(0,a.jsx)(R,{asChild:!0,children:(0,a.jsxs)(f,{variant:"outline",size:"sm",className:"w-full mb-2",children:[(0,a.jsx)($.A,{className:"mr-2 h-4 w-4"}),"View SSH-Add Command"]})}),(0,a.jsxs)(I,{className:"sm:max-w-md",children:[(0,a.jsxs)(Y,{children:[(0,a.jsx)(W,{children:"SSH Add Command"}),(0,a.jsx)(X,{children:"Run this command to add your SSH key to the SSH agent."})]}),(0,a.jsx)("div",{className:"bg-muted rounded-md overflow-auto",children:(0,a.jsx)("div",{className:"p-3",children:(0,a.jsxs)("pre",{className:"text-xs whitespace-pre",children:["ssh-add ~/.ssh/",s.ssh_key_filename]})})}),(0,a.jsx)(Z,{children:(0,a.jsx)(f,{onClick:()=>{let e="ssh-add ~/.ssh/".concat(s.ssh_key_filename);navigator.clipboard.writeText(e),d(!0),ei.o.success("Command copied to clipboard"),setTimeout(()=>{d(!1)},2e3)},className:"w-40 flex items-center gap-2",children:o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ee.A,{className:"h-4 w-4"}),"Copied!"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(et.A,{className:"h-4 w-4"}),"Copy Command"]})})})]})]})})]})}),(0,a.jsxs)(w,{className:"flex justify-between",children:[(0,a.jsxs)(f,{variant:"outline",size:"sm",onClick:r,children:[(0,a.jsx)(ex.A,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,a.jsxs)(f,{variant:"destructive",size:"sm",onClick:i,children:[(0,a.jsx)(em.A,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})}var ef=s(5592);function ej(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,a.jsx)("table",{"data-slot":"table",className:l("w-full caption-bottom text-sm",t),...s})})}function eg(e){let{className:t,...s}=e;return(0,a.jsx)("thead",{"data-slot":"table-header",className:l("[&_tr]:border-b",t),...s})}function ev(e){let{className:t,...s}=e;return(0,a.jsx)("tbody",{"data-slot":"table-body",className:l("[&_tr:last-child]:border-0",t),...s})}function ey(e){let{className:t,...s}=e;return(0,a.jsx)("tr",{"data-slot":"table-row",className:l("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...s})}function eb(e){let{className:t,...s}=e;return(0,a.jsx)("th",{"data-slot":"table-head",className:l("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}function ew(e){let{className:t,...s}=e;return(0,a.jsx)("td",{"data-slot":"table-cell",className:l("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...s})}var eN=s(2481);function ek(e){let{...t}=e;return(0,a.jsx)(eN.bL,{"data-slot":"alert-dialog",...t})}function e_(e){let{...t}=e;return(0,a.jsx)(eN.ZL,{"data-slot":"alert-dialog-portal",...t})}function eA(e){let{className:t,...s}=e;return(0,a.jsx)(eN.hJ,{"data-slot":"alert-dialog-overlay",className:l("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...s})}function eS(e){let{className:t,...s}=e;return(0,a.jsxs)(e_,{children:[(0,a.jsx)(eA,{}),(0,a.jsx)(eN.UC,{"data-slot":"alert-dialog-content",className:l("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...s})]})}function eC(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"alert-dialog-header",className:l("flex flex-col gap-2 text-center sm:text-left",t),...s})}function eE(e){let{className:t,...s}=e;return(0,a.jsx)("div",{"data-slot":"alert-dialog-footer",className:l("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...s})}function eF(e){let{className:t,...s}=e;return(0,a.jsx)(eN.hE,{"data-slot":"alert-dialog-title",className:l("text-lg font-semibold",t),...s})}function ez(e){let{className:t,...s}=e;return(0,a.jsx)(eN.VY,{"data-slot":"alert-dialog-description",className:l("text-muted-foreground text-sm",t),...s})}function eT(e){let{className:t,...s}=e;return(0,a.jsx)(eN.rc,{className:l(p(),t),...s})}function eP(e){let{className:t,...s}=e;return(0,a.jsx)(eN.ZD,{className:l(p({variant:"outline"}),t),...s})}function eO(e){let{open:t,onOpenChange:s}=e,[r,i]=(0,n.useState)([]),[c,l]=(0,n.useState)(!1),[o,d]=(0,n.useState)(!1),[u,h]=(0,n.useState)(null),[x,m]=(0,n.useState)(null),[p,j]=(0,n.useState)(!1);(0,n.useEffect)(()=>{t&&g()},[t]);let g=async()=>{l(!0);try{let e=await er.accountTypes.list();i(e)}catch(e){console.error("Failed to fetch account types:",e),ei.o.error("Error loading account types",{description:e instanceof Error?e.message:"An error occurred"})}finally{l(!1)}},v=e=>{m(e),j(!0)},y=async()=>{if(x)try{await er.accountTypes.delete(x),i(r.filter(e=>e.id!==x)),ei.o.success("Account type deleted",{description:"The account type was successfully deleted."})}catch(e){console.error("Failed to delete account type:",e),ei.o.error("Error deleting account type",{description:e instanceof Error?e.message:"An error occurred"})}finally{j(!1),m(null)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(K,{open:t,onOpenChange:s,children:(0,a.jsxs)(I,{className:"sm:max-w-[525px]",children:[(0,a.jsxs)(Y,{children:[(0,a.jsx)(W,{children:"Account Types"}),(0,a.jsx)(X,{children:"Manage your account type categories for organizing Git accounts."})]}),(0,a.jsx)("div",{className:"flex justify-end mb-4",children:(0,a.jsxs)(f,{size:"sm",onClick:()=>d(!0),className:"flex items-center gap-1",variant:"green",children:[(0,a.jsx)(Q.A,{className:"h-4 w-4"}),"Add Type"]})}),c?(0,a.jsx)("div",{className:"text-center py-4",children:"Loading account types..."}):0===r.length?(0,a.jsx)("div",{className:"text-center py-4 text-muted-foreground",children:"No account types found. Add your first type."}):(0,a.jsx)("div",{className:"max-h-[300px] overflow-y-auto",children:(0,a.jsxs)(ej,{children:[(0,a.jsx)(eg,{children:(0,a.jsxs)(ey,{children:[(0,a.jsx)(eb,{className:"w-full",children:"Name"}),(0,a.jsx)(eb,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(ev,{children:r.map(e=>(0,a.jsxs)(ey,{children:[(0,a.jsx)(ew,{className:"font-medium capitalize",children:e.name}),(0,a.jsxs)(ew,{className:"text-right space-x-1",children:[(0,a.jsx)(f,{variant:"ghost",size:"icon",onClick:()=>h(e),children:(0,a.jsx)(ex.A,{className:"h-4 w-4"})}),(0,a.jsx)(f,{variant:"ghost",size:"icon",onClick:()=>e.id&&v(e.id),children:(0,a.jsx)(em.A,{className:"h-4 w-4"})})]})]},e.id||"type-".concat(e.name)))})]})}),(0,a.jsx)(Z,{children:(0,a.jsx)(f,{onClick:()=>s(!1),variant:"outline",children:"Close"})})]})}),(0,a.jsx)(ec,{open:o,onOpenChange:d,onCreated:e=>{i([...r,e])}}),u&&(0,a.jsx)(ec,{accountType:u,open:!!u,onOpenChange:e=>{e||h(null)},onUpdated:e=>{i(r.map(t=>t.id===e.id?e:t))}}),(0,a.jsx)(ek,{open:p,onOpenChange:j,children:(0,a.jsxs)(eS,{children:[(0,a.jsxs)(eC,{children:[(0,a.jsx)(eF,{children:"Are you sure?"}),(0,a.jsx)(ez,{children:"This will permanently delete this account type. This action cannot be undone."})]}),(0,a.jsxs)(eE,{children:[(0,a.jsx)(eP,{children:"Cancel"}),(0,a.jsx)(eT,{onClick:y,children:"Delete"})]})]})})]})}function eG(){let[e,t]=(0,n.useState)([]),[s,r]=(0,n.useState)(!1),[i,c]=(0,n.useState)(null),[l,o]=(0,n.useState)(!0),[d,u]=(0,n.useState)(!1),[h,x]=(0,n.useState)(null),[m,p]=(0,n.useState)(!1),[w,N]=(0,n.useState)(!1),[k,_]=(0,n.useState)(null),[A,S]=(0,n.useState)(0);(0,n.useEffect)(()=>{C()},[]);let C=async()=>{o(!0),x(null);try{let e=await er.accounts.list();t(e)}catch(e){console.error("Failed to fetch accounts:",e),x("Failed to load accounts. Please try again.")}finally{o(!1)}},E=async s=>{try{let a=await er.accounts.create(s);t([...e,a]),r(!1),ei.o.success("Account added",{description:"".concat(s.name," was successfully added.")})}catch(e){console.error("Failed to add account:",e),ei.o.error("Error adding account",{description:e instanceof Error?e.message:"An error occurred"})}},F=async s=>{if("id"in s)try{let a=await er.accounts.update(s.id,s);t(e.map(e=>e.id===s.id?a:e)),c(null),ei.o.success("Account updated",{description:"".concat(s.name," was successfully updated.")})}catch(e){console.error("Failed to update account:",e),ei.o.error("Error updating account",{description:e instanceof Error?e.message:"An error occurred"})}},z=e=>{_(e),N(!0)},T=async s=>{try{await er.accounts.delete(s),t(e.filter(e=>e.id!==s)),ei.o.success("Account deleted",{description:"The account was successfully deleted."})}catch(e){console.error("Failed to delete account:",e),ei.o.error("Error deleting account",{description:e instanceof Error?e.message:"An error occurred"})}finally{N(!1),_(null)}},P=async()=>{u(!0);try{let e=await er.accounts.syncSSHConfig();ei.o.success("SSH Config Synchronized",{description:"Successfully synced ".concat(e.accounts.length," SSH configurations.")}),C()}catch(e){console.error("Failed to sync SSH config:",e),ei.o.error("Error syncing SSH config",{description:e instanceof Error?e.message:"An error occurred"})}finally{u(!1)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Git Accounts"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(f,{variant:"outline",onClick:P,disabled:d,children:[(0,a.jsx)(ef.A,{className:"mr-2 h-4 w-4 ".concat(d?"animate-spin":"")}),d?"Syncing...":"Sync SSH Config"]}),(0,a.jsx)(f,{variant:"outline",onClick:()=>p(!0),children:"Manage Types"}),(0,a.jsxs)(f,{variant:"green",onClick:()=>r(!0),children:[(0,a.jsx)(Q.A,{className:"mr-2 h-4 w-4"}),"Add Account"]})]})]}),h&&(0,a.jsxs)(V,{variant:"destructive",children:[(0,a.jsx)(es.A,{className:"h-4 w-4"}),(0,a.jsx)(D,{children:"Error"}),(0,a.jsx)(U,{children:h})]}),s&&(0,a.jsxs)(j,{children:[(0,a.jsxs)(g,{children:[(0,a.jsx)(v,{children:"Add Git Account"}),(0,a.jsx)(y,{children:"Enter the details for your Git account"})]}),(0,a.jsx)(b,{children:(0,a.jsx)(el,{onSubmit:E,onCancel:()=>r(!1),accountTypesVersion:A})})]}),i&&(0,a.jsxs)(j,{children:[(0,a.jsxs)(g,{children:[(0,a.jsx)(v,{children:"Edit Git Account"}),(0,a.jsx)(y,{children:"Update the details for your Git account"})]}),(0,a.jsx)(b,{children:(0,a.jsx)(el,{account:i,onSubmit:F,onCancel:()=>c(null),accountTypesVersion:A})})]}),l?(0,a.jsx)("div",{className:"text-center py-8",children:"Loading accounts..."}):0===e.length?(0,a.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No Git accounts found. Add your first account to get started."}):(0,a.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:e.map(e=>(0,a.jsx)(ep,{account:e,onEdit:()=>c(e),onDelete:()=>z(e)},e.id))}),(0,a.jsx)(eO,{open:m,onOpenChange:e=>{p(e),e||S(e=>e+1)}}),(0,a.jsx)(ek,{open:w,onOpenChange:N,children:(0,a.jsxs)(eS,{children:[(0,a.jsxs)(eC,{children:[(0,a.jsx)(eF,{children:"Are you sure?"}),(0,a.jsxs)(ez,{children:['This will permanently delete the account "',null==k?void 0:k.name,'". All projects associated with this account will lose their account context. This action cannot be undone.']})]}),(0,a.jsxs)(eE,{children:[(0,a.jsx)(eP,{children:"Cancel"}),(0,a.jsx)(eT,{onClick:()=>k&&T(k.id),className:"bg-destructive hover:bg-destructive/80 text-white focus:ring-destructive/20",children:"Delete"})]})]})})]})}var eL=s(1436),eH=s(8244),eV=s(9195);function eD(e){let{...t}=e;return(0,a.jsx)(eV.bL,{"data-slot":"collapsible",...t})}function eU(e){let{...t}=e;return(0,a.jsx)(eV.R6,{"data-slot":"collapsible-trigger",...t})}function eq(e){let{...t}=e;return(0,a.jsx)(eV.Ke,{"data-slot":"collapsible-content",...t})}function eM(e){let{project:t,onSubmit:s,onCancel:r,currentAccountId:i}=e,[c,l]=(0,n.useState)({name:(null==t?void 0:t.name)||"",path:(null==t?void 0:t.path)||"",account_id:(null==t?void 0:t.account_id)||null,remote_url:(null==t?void 0:t.remote_url)||"",remote_name:(null==t?void 0:t.remote_name)||""}),[o,d]=(0,n.useState)([]),[u,h]=(0,n.useState)(!1),[x,m]=(0,n.useState)(!!(null==t?void 0:t.remote_url)||!!(null==t?void 0:t.remote_name)),[p,j]=(0,n.useState)(!1);(0,n.useEffect)(()=>{g()},[]),(0,n.useEffect)(()=>{if(null!=i){var e;l(e=>({...e,account_id:i}));let t=null===(e=o.find(e=>e.id===i))||void 0===e?void 0:e.name;t&&ei.o.info("Account updated",{description:"The project's account has been switched to ".concat(t)})}},[i,o]);let g=async()=>{h(!0);try{let e=await er.accounts.list();d(e),!c.account_id&&e.length>0&&l(t=>({...t,account_id:e[0].id}))}catch(e){console.error("Failed to fetch accounts:",e)}finally{h(!1)}},v=e=>{let{name:t,value:s}=e.target;l({...c,[t]:s})},y=async()=>{j(!0);try{let e=await er.system.openFolderDialog();if("success"===e.status&&e.path){if(l({...c,path:e.path}),!c.name){let t=e.path.split(/[/\\]/),s=t[t.length-1];s&&l(e=>({...e,name:s}))}}else"cancelled"===e.status&&ei.o.info("Folder selection cancelled")}catch(e){console.error("Failed to open folder dialog:",e),ei.o.error("Error selecting folder",{description:e instanceof Error?e.message:"An error occurred"})}finally{j(!1)}},[b,w]=(0,n.useState)(!1),k=async e=>{e.preventDefault(),w(!0),await s(c),w(!1)};return(0,a.jsxs)("form",{onSubmit:k,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(_,{htmlFor:"name",children:"Project Name"}),(0,a.jsx)(N,{id:"name",name:"name",value:c.name,onChange:v,placeholder:"My Awesome Project",required:!0})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(_,{htmlFor:"path",children:"Project Path"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(N,{id:"path",name:"path",value:c.path,onChange:v,placeholder:"/path/to/project",className:"flex-1",required:!0}),(0,a.jsx)(f,{type:"button",variant:"outline",onClick:y,is_loading:p,loading_text:"Opening...",children:(0,a.jsx)(eL.A,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(_,{htmlFor:"account",children:"Git Account"}),(0,a.jsxs)(F,{value:c.account_id?c.account_id.toString():"",onValueChange:e=>{l({...c,account_id:Number(e)})},disabled:u||0===o.length,children:[(0,a.jsx)(T,{id:"account",children:(0,a.jsx)(z,{placeholder:u?"Loading accounts...":"Select an account"})}),(0,a.jsx)(P,{children:o.map(e=>(0,a.jsx)(O,{value:e.id.toString(),children:e.name},e.id))})]}),0===o.length&&!u&&(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"No accounts available. Please add an account first."})]}),(0,a.jsxs)(eD,{open:x,onOpenChange:m,children:[(0,a.jsx)(eU,{asChild:!0,children:(0,a.jsxs)(f,{type:"button",variant:"ghost",size:"sm",className:"flex items-center p-0 w-full justify-start",children:[x?(0,a.jsx)(S.A,{className:"h-4 w-4 mr-1"}):(0,a.jsx)(eH.A,{className:"h-4 w-4 mr-1"}),"Advanced Settings"]})}),(0,a.jsxs)(eq,{className:"space-y-4 mt-4",children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(_,{htmlFor:"remote_url",children:"Remote URL (Optional)"}),(0,a.jsx)(N,{id:"remote_url",name:"remote_url",value:c.remote_url,onChange:v,placeholder:"https://github.com/username/repo.git"})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(_,{htmlFor:"remote_name",children:"Remote Name (Optional)"}),(0,a.jsx)(N,{id:"remote_name",name:"remote_name",value:c.remote_name,onChange:v,placeholder:"origin"})]})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)(f,{type:"button",variant:"outline",onClick:r,children:"Cancel"}),(0,a.jsx)(f,{type:"submit",disabled:u||0===o.length,variant:t?"blue":"green",is_loading:b,loading_text:t?"Saving...":"Adding...",children:t?"Update":"Add"})]})]})}var eK=s(8255),eR=s(5630),eJ=s(3374),eB=s(5356);function eI(e){let{className:t,...s}=e;return(0,a.jsx)(eJ.bL,{"data-slot":"radio-group",className:l("grid gap-3",t),...s})}function eY(e){let{className:t,...s}=e;return(0,a.jsx)(eJ.q7,{"data-slot":"radio-group-item",className:l("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:(0,a.jsx)(eJ.C1,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:(0,a.jsx)(eB.A,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}var eZ=s(1980);function eW(e){let{className:t,children:s,...n}=e;return(0,a.jsxs)(eZ.bL,{"data-slot":"scroll-area",className:l("relative",t),...n,children:[(0,a.jsx)(eZ.LM,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:s}),(0,a.jsx)(eX,{}),(0,a.jsx)(eZ.OK,{})]})}function eX(e){let{className:t,orientation:s="vertical",...n}=e;return(0,a.jsx)(eZ.VM,{"data-slot":"scroll-area-scrollbar",orientation:s,className:l("flex touch-none p-px transition-colors select-none","vertical"===s&&"h-full w-2.5 border-l border-l-transparent","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent",t),...n,children:(0,a.jsx)(eZ.lr,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function eQ(e){var t,s;let{isOpen:r,onClose:i,onAccountSelect:c,accounts:l,currentAccountId:o}=e,[d,u]=(0,n.useState)((null===(t=l.find(e=>e.id!==o))||void 0===t?void 0:t.id)||(null===(s=l[0])||void 0===s?void 0:s.id)||null);return(0,a.jsx)(K,{open:r,onOpenChange:i,children:(0,a.jsxs)(I,{className:"sm:max-w-md",children:[(0,a.jsx)(Y,{children:(0,a.jsx)(W,{children:"Select Account"})}),(0,a.jsx)("div",{className:"py-4",children:(0,a.jsx)(eW,{className:"h-[300px] pr-4",children:(0,a.jsx)(eI,{value:null==d?void 0:d.toString(),onValueChange:e=>u(parseInt(e,10)),children:l.filter(e=>e.id!==o).map(e=>{var t;return(0,a.jsxs)("div",{className:"flex items-center space-x-2 py-2 px-1 rounded hover:bg-accent",children:[(0,a.jsx)(eY,{value:e.id.toString(),id:e.id.toString()}),(0,a.jsxs)(_,{htmlFor:e.id.toString(),className:"flex-grow cursor-pointer",children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:null===(t=e.account_type)||void 0===t?void 0:t.name})]})]},e.id)})})})}),(0,a.jsxs)(Z,{children:[(0,a.jsx)(f,{type:"button",variant:"outline",onClick:i,children:"Cancel"}),(0,a.jsx)(f,{type:"button",disabled:null===d,onClick:()=>{null!==d&&(c(d),i())},children:"Switch Account"})]})]})})}function e$(e){let{project:t,onEdit:s,onDelete:r,onValidate:i,onAccountSwitch:c}=e,[l,o]=(0,n.useState)("Loading..."),[d,u]=(0,n.useState)(!1),[h,x]=(0,n.useState)(!1),[m,p]=(0,n.useState)([]),[y,N]=(0,n.useState)(!1);(0,n.useEffect)(()=>{t.account_id?k():o("No Account")},[t.account_id]);let k=async()=>{if(t.account_id)try{let e=await er.accounts.get(t.account_id);o(e.name)}catch(e){console.error("Failed to fetch account:",e),o("Unknown Account")}},_=async()=>{u(!0);try{let e=await er.accounts.list();if(p(e),e.length<=1){ei.o.warning("Switch account failed",{description:"You need at least two accounts to switch between them."});return}let s=e.filter(e=>e.id!==t.account_id);if(0===s.length)return;s.length>1?N(!0):await A(s[0].id)}catch(e){console.error("Failed to fetch accounts:",e),ei.o.error("Failed to switch account",{description:e instanceof Error?e.message:"Unknown error"})}finally{u(!1)}},A=async e=>{u(!0);try{await er.projects.update(t.id,{account_id:e});let s=m.find(t=>t.id===e);ei.o.success("Account switched",{description:"Switched project ".concat(t.name," to account: ").concat(null==s?void 0:s.name)}),o((null==s?void 0:s.name)||"Unknown Account"),c&&c(t.id,e)}catch(e){console.error("Failed to switch account:",e),ei.o.error("Failed to switch account",{description:e instanceof Error?e.message:"Unknown error"})}finally{u(!1)}},S=async()=>{x(!0);try{await i()}finally{x(!1)}};return(0,a.jsxs)(j,{children:[(0,a.jsx)(g,{children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsx)(v,{children:t.name}),(0,a.jsx)(ed,{children:l})]})}),(0,a.jsx)(b,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center text-sm",children:[(0,a.jsx)(eL.A,{className:"mr-2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"truncate",children:t.path})]}),t.remote_url&&(0,a.jsxs)("div",{className:"flex items-center text-sm",children:[(0,a.jsx)(eK.A,{className:"mr-2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"truncate",children:t.remote_url})]}),(0,a.jsx)("div",{className:"flex items-center mt-4",children:t.configured?(0,a.jsxs)(ed,{variant:"outline",className:"flex gap-1 items-center",children:[(0,a.jsx)(eR.A,{className:"h-3 w-3"})," Configured"]}):(0,a.jsxs)(ed,{variant:"outline",className:"flex gap-1 items-center text-amber-500 border-amber-500",children:[(0,a.jsx)(es.A,{className:"h-3 w-3"})," Not Configured"]})})]})}),(0,a.jsxs)(w,{className:"flex justify-between",children:[(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)(f,{variant:"outline",size:"sm",onClick:s,children:[(0,a.jsx)(ex.A,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,a.jsxs)(f,{variant:"destructive",size:"sm",onClick:r,children:[(0,a.jsx)(em.A,{className:"mr-2 h-4 w-4"}),"Delete"]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(f,{size:"sm",variant:"outline",onClick:S,disabled:h,children:h?"Validating...":"Validate"}),(0,a.jsxs)(f,{size:"sm",onClick:_,disabled:d,variant:"blue",children:[(0,a.jsx)(eK.A,{className:"mr-2 h-4 w-4"}),d?"Switching...":"Switch Account"]})]})]}),(0,a.jsx)(eQ,{isOpen:y,onClose:()=>N(!1),onAccountSelect:A,accounts:m,currentAccountId:t.account_id})]})}var e0=s(2563);function e4(){let[e,t]=(0,n.useState)([]),[s,r]=(0,n.useState)(!1),[i,c]=(0,n.useState)(null),[l,o]=(0,n.useState)(!0),[d,u]=(0,n.useState)(null),[h,x]=(0,n.useState)(!1),[m,p]=(0,n.useState)(null),[w,N]=(0,n.useState)(null);(0,n.useEffect)(()=>{k()},[]);let k=async()=>{o(!0),u(null);try{let e=await er.projects.list();t(e)}catch(e){console.error("Failed to fetch projects:",e),u("Failed to load projects. Please try again.")}finally{o(!1)}},_=async s=>{try{let a=await er.projects.create(s);t([...e,a]),r(!1),ei.o.success("Project added",{description:"".concat(s.name," was successfully added.")})}catch(e){console.error("Failed to add project:",e),ei.o.error("Error adding project",{description:e instanceof Error?e.message:"An error occurred"})}},A=async s=>{if(i)try{let a=await er.projects.update(i.id,s);t(e.map(e=>e.id===i.id?a:e)),c(null),ei.o.success("Project updated",{description:"".concat(s.name," was successfully updated.")})}catch(e){console.error("Failed to update project:",e),ei.o.error("Error updating project",{description:e instanceof Error?e.message:"An error occurred"})}},S=e=>{p(e),x(!0)},C=async s=>{try{await er.projects.delete(s),t(e.filter(e=>e.id!==s)),ei.o.success("Project deleted",{description:"The project was successfully deleted."})}catch(e){console.error("Failed to delete project:",e),ei.o.error("Error deleting project",{description:e instanceof Error?e.message:"An error occurred"})}finally{x(!1),p(null)}},E=async e=>{try{return await er.projects.validate(e),ei.o.success("Project validated",{description:"The project configuration is valid."}),!0}catch(e){return console.error("Project validation failed:",e),ei.o.error("Validation failed",{description:e instanceof Error?e.message:"Project configuration is invalid"}),!1}},F=async(s,a)=>{try{let n=await er.projects.get(s),r=e.map(e=>e.id===s?n:e);t(r),i&&i.id===s&&(c(n),N(a))}catch(e){console.error("Failed to refresh project data after account switch:",e),ei.o.error("Error refreshing project data",{description:"Project was updated but the display may be out of date."})}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Git Projects"}),(0,a.jsx)("div",{className:"flex space-x-2",children:(0,a.jsxs)(f,{onClick:()=>r(!0),variant:"green",children:[(0,a.jsx)(Q.A,{className:"mr-2 h-4 w-4"}),"Add Project"]})})]}),d&&(0,a.jsxs)(V,{variant:"destructive",children:[(0,a.jsx)(es.A,{className:"h-4 w-4"}),(0,a.jsx)(D,{children:"Error"}),(0,a.jsx)(U,{children:d})]}),s&&(0,a.jsxs)(j,{children:[(0,a.jsxs)(g,{children:[(0,a.jsx)(v,{children:"Add Git Project"}),(0,a.jsx)(y,{children:"Configure a local Git project to use a specific account"})]}),(0,a.jsx)(b,{children:(0,a.jsx)(eM,{onSubmit:_,onCancel:()=>r(!1)})})]}),i&&(0,a.jsxs)(j,{children:[(0,a.jsxs)(g,{children:[(0,a.jsx)(v,{children:"Edit Git Project"}),(0,a.jsx)(y,{children:"Update the configuration for your Git project"})]}),(0,a.jsx)(b,{children:(0,a.jsx)(eM,{project:i,onSubmit:A,onCancel:()=>{c(null),N(null)},currentAccountId:w})})]}),l?(0,a.jsx)("div",{className:"text-center py-8",children:"Loading projects..."}):0===e.length?(0,a.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,a.jsx)(e0.A,{className:"mx-auto h-12 w-12 text-muted-foreground/50"}),(0,a.jsx)("p",{className:"mt-2",children:"No Git projects found. Add your first project to get started."})]}):(0,a.jsx)("div",{className:"grid gap-6 md:grid-cols-2",children:e.map(e=>(0,a.jsx)(e$,{project:e,onEdit:()=>{c(e),N(null)},onDelete:()=>S(e),onValidate:()=>E(e.id),onAccountSwitch:F},e.id))}),(0,a.jsx)(ek,{open:h,onOpenChange:x,children:(0,a.jsxs)(eS,{children:[(0,a.jsxs)(eC,{children:[(0,a.jsx)(eF,{children:"Are you sure?"}),(0,a.jsxs)(ez,{children:['This will permanently delete the project "',null==m?void 0:m.name,'". This action cannot be undone.']})]}),(0,a.jsxs)(eE,{children:[(0,a.jsx)(eP,{children:"Cancel"}),(0,a.jsx)(eT,{onClick:()=>m&&C(m.id),className:"bg-destructive hover:bg-destructive/80 text-white focus:ring-destructive/20",children:"Delete"})]})]})})]})}function e2(){return(0,a.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(eK.A,{className:"h-6 w-6"}),(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Git Account Manager"})]}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Manage multiple Git accounts and configure projects to use specific accounts"})]})}var e1=s(7594),e5=s(1589),e3=s(1458),e6=s(7950),e8=s.n(e6);function e9(e){let{children:t}=e,[s,r]=(0,n.useState)({git:!1,ssh:!1,checking:!0}),[i,c]=(0,n.useState)(!1),l=async()=>{r(e=>({...e,checking:!0,error:void 0}));try{let e=await er.system.check();r({git:e.git,ssh:e.ssh,checking:!1}),e.git&&e.ssh&&setTimeout(()=>{c(!0)},2e3)}catch(e){r({git:!1,ssh:!1,checking:!1,error:e instanceof Error?e.message:"Unknown error occurred"})}};return((0,n.useEffect)(()=>{l()},[]),i)?(0,a.jsx)(a.Fragment,{children:t}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-muted/40 p-4",children:(0,a.jsxs)(j,{className:"w-full max-w-md",children:[(0,a.jsxs)(g,{children:[(0,a.jsx)(v,{children:"Git Account Manager"}),(0,a.jsx)(y,{children:"Verifying system prerequisites..."})]}),(0,a.jsx)(b,{className:"space-y-4",children:s.checking?(0,a.jsxs)("div",{className:"flex items-center justify-center py-6",children:[(0,a.jsx)(e1.A,{className:"h-8 w-8 animate-spin text-primary"}),(0,a.jsx)("span",{className:"ml-2 text-lg",children:"Checking prerequisites..."})]}):(0,a.jsxs)(a.Fragment,{children:[s.error&&(0,a.jsxs)(V,{variant:"destructive",className:"mb-4",children:[(0,a.jsx)(e5.A,{className:"h-4 w-4"}),(0,a.jsx)(D,{children:"Error"}),(0,a.jsx)(U,{children:s.error})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(e7,{name:"Git",installed:s.git,description:"Required for repository operations",installUrl:"https://git-scm.com/downloads"}),(0,a.jsx)(e7,{name:"SSH",installed:s.ssh,description:"Required for secure authentication",installUrl:"https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent"})]}),s.git&&s.ssh?(0,a.jsxs)(V,{className:"mt-6 bg-green-50 text-green-800 dark:bg-green-900/20 dark:text-green-400 border-green-200 dark:border-green-800",children:[(0,a.jsx)(eR.A,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),(0,a.jsx)(D,{children:"All prerequisites met!"}),(0,a.jsx)(U,{children:"Launching Git Account Manager..."})]}):null]})}),!s.checking&&(!s.git||!s.ssh)&&(0,a.jsx)(w,{children:(0,a.jsx)(f,{onClick:()=>l(),className:"w-full",disabled:s.checking,children:s.checking?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e1.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Checking..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ef.A,{className:"mr-2 h-4 w-4"}),"Check Again"]})})})]})})}function e7(e){let{name:t,installed:s,description:n,installUrl:r}=e;return(0,a.jsxs)("div",{className:"flex items-start space-x-3 p-3 rounded-md border",children:[s?(0,a.jsx)(eR.A,{className:"h-5 w-5 text-green-600 dark:text-green-400 mt-0.5"}):(0,a.jsx)(e5.A,{className:"h-5 w-5 text-red-600 dark:text-red-400 mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"font-medium",children:t}),!s&&(0,a.jsxs)(e8(),{href:r,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 flex items-center",children:["Install",(0,a.jsx)(e3.A,{className:"ml-1 h-3 w-3"})]})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:n}),!s&&(0,a.jsx)("div",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:"Not detected on your system"})]})]})}function te(e){let{attempt:t=0,max_attempts:s=3}=e,n=0===t?"Connecting to backend...":t>0&&t<=s?"Connection error. Retrying... Attempt: ".concat(t," / ").concat(s):"Max attempts reached. Please try again later.";return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,a.jsx)(e1.A,{className:"h-12 w-12 animate-spin text-primary"}),(0,a.jsx)("h2",{className:"text-xl font-medium",children:"Loading Git Account Manager..."}),(0,a.jsx)("div",{className:"h-5",children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:n})})]})})}function tt(e){let{retry_connection:t}=e;return(0,a.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-muted/40 p-4",children:(0,a.jsxs)("div",{className:"w-full max-w-md text-center",children:[(0,a.jsxs)(V,{variant:"destructive",className:"mb-4",children:[(0,a.jsx)(D,{className:"text-xl font-medium",children:"Connection Error"}),(0,a.jsx)(U,{className:"mt-4",children:"Failed to connect to the backend server."})]}),(0,a.jsx)(f,{onClick:t,className:"w-full",children:"Retry Connection"})]})})}function ts(){return(0,a.jsx)(e9,{children:(0,a.jsxs)("main",{className:"container mx-auto py-6 px-4 md:px-6",children:[(0,a.jsx)(e2,{}),(0,a.jsxs)(o,{defaultValue:"accounts",className:"mt-6",children:[(0,a.jsxs)(d,{className:"grid w-full grid-cols-2 mb-8",children:[(0,a.jsx)(u,{value:"accounts",children:"Git Accounts"}),(0,a.jsx)(u,{value:"projects",children:"Projects"})]}),(0,a.jsx)(h,{value:"accounts",children:(0,a.jsx)(eG,{})}),(0,a.jsx)(h,{value:"projects",children:(0,a.jsx)(e4,{})})]})]})})}function ta(){let{connection_status:e,error_message:t,retry_connection:s,retry_count:r}=function(){let[e,t]=(0,n.useState)("connecting"),[s,a]=(0,n.useState)(null),[r,i]=(0,n.useState)(0);return(0,n.useEffect)(()=>{let e=!0,s=async n=>{if(!e)return;t("connecting"),a(null),i(n),console.log("Attempt ".concat(n,": Connecting to backend..."));let r=Date.now();try{await er.utils.health();let s=Date.now()-r;s<500&&await new Promise(e=>setTimeout(e,500-s)),e&&(console.log("Attempt ".concat(n,": Backend connection successful")),t("connected"))}catch(r){console.error("Attempt ".concat(n,": Backend connection error:"),r),n<3?(await new Promise(e=>setTimeout(e,1e3)),e&&s(n+1)):e&&(t("error"),a(r instanceof Error?r.message:"Failed to connect to backend server."))}};return s(0),()=>{e=!1}},[]),{connection_status:e,error_message:s,retry_connection:()=>{t("connecting"),a(null),window.location.reload()},retry_count:r}}();return"connecting"===e?(0,a.jsx)(te,{attempt:r,max_attempts:3}):"error"===e?(0,a.jsx)(tt,{retry_connection:s}):(0,a.jsx)(ts,{})}},8224:(e,t,s)=>{Promise.resolve().then(s.bind(s,6666))}},e=>{var t=t=>e(e.s=t);e.O(0,[233,516,135,497,954,358],()=>t(8224)),_N_E=e.O()}]);